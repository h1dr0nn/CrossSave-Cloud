var he=(l,e,a)=>new Promise((i,s)=>{var m=d=>{try{y(a.next(d))}catch(v){s(v)}},f=d=>{try{y(a.throw(d))}catch(v){s(v)}},y=d=>d.done?i(d.value):Promise.resolve(d.value).then(m,f);y((a=a.apply(l,e)).next())});import{f as j,a as u,c as fe,d as we,t as xe}from"../chunks/DPnlUN19.js";import{i as oe}from"../chunks/CJhM_Lgy.js";import{$ as Ke,J as He,b3 as Ve,ad as Je,aL as Qe,u as E,b4 as Xe,aA as Le,b5 as Ye,am as et,R as pe,b6 as tt,x as ne,aQ as Ce,d as r,o as K,e as t,z as ve,f as ie,s as w,b as H,n,ai as Ie,af as ue,V as N,S as W,ag as Oe,w as Ae,y as Re,a1 as at}from"../chunks/TqzBH3f9.js";import{p as V,i as G,a as Ee,s as st}from"../chunks/XC4p9u9B.js";import{a as rt,s as z,e as se}from"../chunks/Ccd0LZme.js";import{h as me,a as Me,s as ge,j as _e,b as lt,p as it,l as ot,v as nt}from"../chunks/DVZCo2vZ.js";import{g as Ze}from"../chunks/Z452qOzf.js";import{o as Pe,A as vt}from"../chunks/BtaKOGW2.js";const ct=()=>performance.now(),le={tick:l=>requestAnimationFrame(l),now:()=>ct(),tasks:new Set};function Ge(){const l=le.now();le.tasks.forEach(e=>{e.c(l)||(le.tasks.delete(e),e.f())}),le.tasks.size!==0&&le.tick(Ge)}function dt(l){let e;return le.tasks.size===0&&le.tick(Ge),{promise:new Promise(a=>{le.tasks.add(e={c:l,f:a})}),abort(){le.tasks.delete(e)}}}function ke(l,e){Le(()=>{l.dispatchEvent(new CustomEvent(e))})}function ut(l){if(l==="float")return"cssFloat";if(l==="offset")return"cssOffset";if(l.startsWith("--"))return l;const e=l.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(a=>a[0].toUpperCase()+a.slice(1)).join("")}function Fe(l){const e={},a=l.split(";");for(const i of a){const[s,m]=i.split(":");if(!s||m===void 0)break;const f=ut(s.trim());e[f]=m.trim()}return e}const ft=l=>l;function De(l,e,a,i){var L;var s=(l&Xe)!==0,m="both",f,y=e.inert,d=e.style.overflow,v,o;function k(){return Le(()=>{var _;return f!=null?f:f=a()(e,(_=i==null?void 0:i())!=null?_:{},{direction:m})})}var S={is_global:s,in(){e.inert=y,ke(e,"introstart"),v=je(e,k(),o,1,()=>{ke(e,"introend"),v==null||v.abort(),v=f=void 0,e.style.overflow=d})},out(_){e.inert=!0,ke(e,"outrostart"),o=je(e,k(),v,0,()=>{ke(e,"outroend"),_==null||_()})},stop:()=>{v==null||v.abort(),o==null||o.abort()}},b=Ke;if(((L=b.transitions)!=null?L:b.transitions=[]).push(S),rt){var x=s;if(!x){for(var h=b.parent;h&&(h.f&He)!==0;)for(;(h=h.parent)&&(h.f&Ve)===0;);x=!h||(h.f&Je)!==0}x&&Qe(()=>{E(()=>S.in())})}}function je(l,e,a,i,s){var m=i===1;if(Ye(e)){var f,y=!1;return et(()=>{if(!y){var L=e({direction:m?"in":"out"});f=je(l,L,a,i,s)}}),{abort:()=>{y=!0,f==null||f.abort()},deactivate:()=>f.deactivate(),reset:()=>f.reset(),t:()=>f.t()}}if(a==null||a.deactivate(),!(e!=null&&e.duration))return s(),{abort:pe,deactivate:pe,reset:pe,t:()=>i};const{delay:d=0,css:v,tick:o,easing:k=ft}=e;var S=[];if(m&&a===void 0&&(o&&o(0,1),v)){var b=Fe(v(0,1));S.push(b,b)}var x=()=>1-i,h=l.animate(S,{duration:d,fill:"forwards"});return h.onfinish=()=>{var A;h.cancel();var L=(A=a==null?void 0:a.t())!=null?A:1-i;a==null||a.abort();var _=i-L,F=e.duration*Math.abs(_),O=[];if(F>0){var D=!1;if(v)for(var p=Math.ceil(F/16.666666666666668),g=0;g<=p;g+=1){var P=L+_*k(g/p),$=Fe(v(P,1-P));O.push($),D||(D=$.overflow==="hidden")}D&&(l.style.overflow="hidden"),x=()=>{var B=h.currentTime;return L+_*k(B/F)},o&&dt(()=>{if(h.playState!=="running")return!1;var B=x();return o(B,1-B),!0})}h=l.animate(O,{duration:F,fill:"forwards"}),h.onfinish=()=>{x=()=>i,o==null||o(i,1-i),s()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=pe)},deactivate:()=>{s=pe},reset:()=>{i===0&&(o==null||o(1,0))},t:()=>x()}}function ht(l,e){tt(window,["resize"],()=>Le(()=>e(window[l])))}var pt=j('<p class="empty svelte-112du2d">No emulator profiles found.</p>'),mt=j('<button role="option"><span class="blur-plate svelte-112du2d" aria-hidden="true"></span> <div class="button-surface svelte-112du2d"><div class="icon svelte-112du2d"><svg viewBox="0 0 24 24" aria-hidden="true" class="svelte-112du2d"><path d="M5 7.5A2.5 2.5 0 0 1 7.5 5h9A2.5 2.5 0 0 1 19 7.5v9A2.5 2.5 0 0 1 16.5 19h-9A2.5 2.5 0 0 1 5 16.5Zm2.5-.5a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5Z" fill="currentColor"></path><path d="M9.75 11.25h4.5v1.5h-4.5Z" fill="#10b981"></path><path d="M9.75 14.25h2.5v1.5h-2.5Z" fill="#10b981"></path></svg></div> <div class="text svelte-112du2d"><span class="svelte-112du2d"> </span> <small class="svelte-112du2d"> </small></div></div></button>'),_t=j('<div class="list svelte-112du2d" role="listbox" aria-label="Emulator profiles"><!></div>');function gt(l,e){ne(e,!1);let a=V(e,"emulators",24,()=>[]),i=V(e,"selectedId",8,null);const s=Ce();function m(o){s("select",o)}oe();var f=_t(),y=r(f);{var d=o=>{var k=pt();u(o,k)},v=o=>{var k=fe(),S=ie(k);me(S,1,a,_e,(b,x)=>{var h=mt();let L;var _=w(r(h),2),F=w(r(_),2),O=r(F),D=r(O,!0);t(O);var p=w(O,2),g=r(p,!0);t(p),t(F),t(_),t(h),H(()=>{Me(h,"aria-selected",(n(x),K(i()),E(()=>n(x).emulator_id===i()))),L=ge(h,1,"svelte-112du2d",null,L,{selected:n(x).emulator_id===i()}),z(D,(n(x),E(()=>n(x).name))),z(g,(n(x),E(()=>{var P;return(P=n(x).default_save_paths[0])!=null?P:"No save path"})))}),se("click",h,()=>m(n(x).emulator_id)),u(b,h)}),u(o,k)};G(y,o=>{K(a()),E(()=>a().length===0)?o(d):o(v,!1)})}t(f),u(l,f),ve()}var wt=j('<div class="overlay svelte-181dlmc" aria-hidden="true"></div>'),bt=j('<button class="close svelte-181dlmc" aria-label="Close emulator drawer"><svg viewBox="0 0 24 24" aria-hidden="true" class="svelte-181dlmc"><path d="M6 6l12 12m0-12L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button>'),yt=j('<!> <aside aria-label="Emulator list"><div class="sidebar-surface svelte-181dlmc"><div class="sidebar-header svelte-181dlmc"><div class="title svelte-181dlmc"><svg viewBox="0 0 24 24" aria-hidden="true" class="svelte-181dlmc"><path d="M6.5 3.5h11a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2v-13a2 2 0 0 1 2-2Zm0 2v13h11v-13Z" fill="currentColor"></path><circle cx="9" cy="9" r="1" fill="#10b981"></circle><circle cx="15" cy="9" r="1" fill="#10b981"></circle></svg> <div><p class="svelte-181dlmc">Emulators</p> <small class="svelte-181dlmc"> </small></div></div> <!></div> <div class="list-shell svelte-181dlmc"><!></div></div></aside>',1);function xt(l,e){ne(e,!1);let a=V(e,"emulators",24,()=>[]),i=V(e,"selectedId",8,null),s=V(e,"isMobile",8,!1),m=V(e,"open",8,!1),f=V(e,"loading",8,!1);const y=Ce();function d(A){y("select",A)}function v(){s()&&y("close")}oe();var o=yt(),k=ie(o);{var S=A=>{var B=wt();se("click",B,v),u(A,B)};G(k,A=>{s()&&m()&&A(S)})}var b=w(k,2);let x;var h=r(b),L=r(h),_=r(L),F=w(r(_),2),O=w(r(F),2),D=r(O,!0);t(O),t(F),t(_);var p=w(_,2);{var g=A=>{var B=bt();se("click",B,v),u(A,B)};G(p,A=>{s()&&A(g)})}t(L);var P=w(L,2),$=r(P);gt($,{get emulators(){return a()},get selectedId(){return i()},$$events:{select:A=>d(A.detail)}}),t(P),t(h),t(b),H(()=>{x=ge(b,1,"svelte-181dlmc",null,x,{selected:!s()||m(),drawer:s()}),z(D,(K(f()),K(a()),E(()=>f()?"Loading profiles":"".concat(a().length," available"))))}),u(l,o),ve()}var kt=j('<p class="empty svelte-1hc8sw2">Select an emulator to view its saves.</p>'),St=we('<svg viewBox="0 0 24 24" aria-hidden="true"><rect x="4" y="8" width="16" height="8" rx="2" fill="var(--card-contrast)"></rect><path d="M9.5 11h5v2h-5z" fill="#22c55e"></path><circle cx="8" cy="12" r="1" fill="#22c55e"></circle><circle cx="16" cy="12" r="1" fill="#22c55e"></circle></svg>'),Ct=we('<svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3 9.5 11h-5L10 13l-2.5 8L12 15l4.5 6-2.5-8 5.5-2h-5Z" fill="#0ea5e9"></path></svg>'),Mt=we('<svg viewBox="0 0 24 24" aria-hidden="true"><circle cx="12" cy="12" r="8" fill="#6366f1"></circle><circle cx="12" cy="12" r="3" fill="#e0f2fe"></circle></svg>'),Et=j('<button class="card svelte-1hc8sw2"><div class="icon svelte-1hc8sw2"><!></div> <div class="meta svelte-1hc8sw2"><strong class="svelte-1hc8sw2"> </strong> <span class="svelte-1hc8sw2"> </span></div> <svg class="chevron svelte-1hc8sw2" viewBox="0 0 24 24" aria-hidden="true"><path d="m9 5 7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg></button>'),jt=j('<div class="grid svelte-1hc8sw2"></div>'),Lt=j('<section class="panel svelte-1hc8sw2"><header class="svelte-1hc8sw2"><div><p class="eyebrow svelte-1hc8sw2">Games</p> <h2 class="svelte-1hc8sw2"> </h2></div> <span class="badge svelte-1hc8sw2"> </span></header> <!></section>');function At(l,e){ne(e,!1);let a=V(e,"games",24,()=>[]),i=V(e,"emulatorName",8,"");const s=new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});function m(_){return s.format(new Date(_))}function f(_){Ze("/game/".concat(encodeURIComponent(_)))}oe();var y=Lt(),d=r(y),v=r(d),o=w(r(v),2),k=r(o,!0);t(o),t(v);var S=w(v,2),b=r(S);t(S),t(d);var x=w(d,2);{var h=_=>{var F=kt();u(_,F)},L=_=>{var F=jt();me(F,5,a,_e,(O,D)=>{var p=Et(),g=r(p),P=r(g);{var $=Z=>{var Q=St();u(Z,Q)},A=Z=>{var Q=fe(),ee=ie(Q);{var te=U=>{var ae=Ct();u(U,ae)},X=U=>{var ae=Mt();u(U,ae)};G(ee,U=>{n(D),E(()=>n(D).icon==="spark")?U(te):U(X,!1)},!0)}u(Z,Q)};G(P,Z=>{n(D),E(()=>n(D).icon==="console")?Z($):Z(A,!1)})}t(g);var B=w(g,2),M=r(B),q=r(M,!0);t(M);var J=w(M,2),Y=r(J,!0);t(J),t(B),Ie(2),t(p),H(Z=>{Me(g,"data-variant",(n(D),E(()=>n(D).icon))),z(q,(n(D),E(()=>n(D).name))),z(Y,Z)},[()=>(n(D),E(()=>m(n(D).lastModified)))]),se("click",p,()=>f(n(D).id)),u(O,p)}),t(F),u(_,F)};G(x,_=>{K(a()),E(()=>a().length===0)?_(h):_(L,!1)})}t(y),H(()=>{var _;z(k,i()||"Choose an emulator"),z(b,"".concat((_=(K(a()),E(()=>a().length)))!=null?_:""," titles"))}),u(l,y),ve()}var Bt=j('<button title="Reload games"><svg viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-mmttu1"><path d="M23 4v6h-6"></path><path d="M1 20v-6h6"></path><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></button>'),Pt=we('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="icon-success"><polyline points="20 6 9 17 4 12"></polyline></svg>'),Ft=we('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="icon-error"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>'),Dt=j('<li><div class="status-icon"><!></div> <div class="path-details"><span class="path"> </span> <span class="error"><!></span></div></li>'),Nt=j('<div class="debug-panel"><div class="debug-header"><h3>Path Status</h3> <button>Close</button></div> <ul class="path-list"></ul></div>'),Tt=j('<p class="empty svelte-mmttu1">Loading emulator profileâ€¦</p>'),It=j('<p class="empty svelte-mmttu1">Choose an emulator to preview save details.</p>'),Ot=j('<code class="svelte-mmttu1"> </code>'),Rt=j('<li class="svelte-mmttu1"> </li>'),Zt=j('<div class="fields svelte-mmttu1"><div class="field svelte-mmttu1"><p class="label svelte-mmttu1">Save path</p> <div class="value svelte-mmttu1"> </div></div> <div class="field svelte-mmttu1"><p class="label svelte-mmttu1">Pattern</p> <div class="value chips svelte-mmttu1"></div></div> <div class="preview svelte-mmttu1"><div class="preview-head svelte-mmttu1"><div><p class="eyebrow svelte-mmttu1">Matched files</p> <strong class="svelte-mmttu1"> </strong></div> <span class="pill svelte-mmttu1">Live preview</span></div> <ul class="svelte-mmttu1"></ul></div></div>'),Gt=j('<section class="panel svelte-mmttu1"><header class="svelte-mmttu1"><div><p class="eyebrow svelte-mmttu1">Save folder preview</p> <h2 class="svelte-mmttu1"> </h2></div> <div class="actions svelte-mmttu1"><!> <button class="open svelte-mmttu1"><svg viewBox="0 0 24 24" aria-hidden="true" class="svelte-mmttu1"><path d="M4.5 6a2 2 0 0 1 2-2h2.9a1 1 0 0 1 .83.45L11.8 6H17.5A2.5 2.5 0 0 1 20 8.5v8.25a1.75 1.75 0 0 1-1.75 1.75h-11.5A2.25 2.25 0 0 1 4.5 16.25Z" fill="currentColor"></path></svg> Open folder</button></div></header> <!> <!></section>');function zt(l,e){ne(e,!1);const a=W(),i=Ce();let s=V(e,"profile",8,null),m=V(e,"loading",8,!1);function f(){return he(this,null,function*(){var p;if((p=s())!=null&&p.default_save_paths.length){for(const g of s().default_save_paths)try{yield Pe(g);return}catch(P){console.warn("Failed to open ".concat(g),P)}lt("Could not open specific folder. Opening file manager...");try{yield Pe("/storage/emulated/0")}catch(g){console.error("Failed to open root storage",g),it("Unable to open file manager.")}}})}ue(()=>K(s()),()=>{N(a,s()?Math.max(s().file_patterns.length*Math.max(s().default_save_paths.length,1),0):0)}),Oe(),oe();var y=Gt(),d=r(y),v=r(d),o=w(r(v),2),k=r(o,!0);t(o),t(v);var S=w(v,2),b=r(S);{var x=p=>{var g=Bt();let P;H(()=>{P=ge(g,1,"icon-button svelte-mmttu1",null,P,{spinning:m()}),g.disabled=m()}),se("click",g,()=>i("reload")),u(p,g)};G(b,p=>{s()&&p(x)})}var h=w(b,2);t(S),t(d);var L=w(d,2);{var _=p=>{var g=Nt(),P=r(g),$=w(r(P),2);t(P);var A=w(P,2);me(A,4,()=>pathStatuses,_e,(B,M)=>{var q=Dt();let J;var Y=r(q),Z=r(Y);{var Q=C=>{var I=Pt();u(C,I)},ee=C=>{var I=Ft();u(C,I)};G(Z,C=>{E(()=>M.exists&&M.is_dir)?C(Q):C(ee,!1)})}t(Y);var te=w(Y,2),X=r(te),U=r(X,!0);t(X);var ae=w(X,2),c=r(ae);{var T=C=>{var I=xe("Not found");u(C,I)},R=C=>{var I=fe(),re=ie(I);{var ze=ce=>{var be=xe("Not a directory");u(ce,be)},Ue=ce=>{var be=fe(),$e=ie(be);{var qe=de=>{var ye=xe();H(()=>{var Be;return z(ye,"Error: ".concat((Be=E(()=>M.error))!=null?Be:""))}),u(de,ye)},We=de=>{var ye=xe("OK");u(de,ye)};G($e,de=>{E(()=>M.error)?de(qe):de(We,!1)},!0)}u(ce,be)};G(re,ce=>{E(()=>!M.is_dir)?ce(ze):ce(Ue,!1)},!0)}u(C,I)};G(c,C=>{E(()=>!M.exists)?C(T):C(R,!1)})}t(ae),t(te),t(q),H(()=>{J=ge(q,1,"",null,J,{valid:M.exists&&M.is_dir,invalid:!M.exists||!M.is_dir}),z(U,E(()=>M.path))}),u(B,q)}),t(A),t(g),se("click",$,()=>showDebug=!1),u(p,g)};G(L,p=>{showDebug&&p(_)})}var F=w(L,2);{var O=p=>{var g=Tt();u(p,g)},D=p=>{var g=fe(),P=ie(g);{var $=B=>{var M=It();u(B,M)},A=B=>{var M=Zt(),q=r(M),J=w(r(q),2),Y=r(J,!0);t(J),t(q);var Z=w(q,2),Q=w(r(Z),2);me(Q,5,()=>(K(s()),E(()=>s().file_patterns)),_e,(T,R)=>{var C=Ot(),I=r(C,!0);t(C),H(()=>z(I,n(R))),u(T,C)}),t(Q),t(Z);var ee=w(Z,2),te=r(ee),X=r(te),U=w(r(X),2),ae=r(U);t(U),t(X),Ie(2),t(te);var c=w(te,2);me(c,5,()=>(K(s()),E(()=>s().file_patterns)),_e,(T,R)=>{var C=Rt(),I=r(C,!0);t(C),H(()=>z(I,n(R))),u(T,C)}),t(c),t(ee),t(M),H((T,R)=>{var C;Me(J,"title",T),z(Y,R),z(ae,"".concat((C=n(a))!=null?C:""," detected"))},[()=>(K(s()),E(()=>s().default_save_paths.join(", "))),()=>(K(s()),E(()=>s().default_save_paths.join("\n")))]),u(B,M)};G(P,B=>{s()?B(A,!1):B($)},!0)}u(p,g)};G(F,p=>{m()?p(O):p(D,!1)})}t(y),H(()=>{z(k,(K(s()),E(()=>{var p,g;return(g=(p=s())==null?void 0:p.name)!=null?g:"Select an emulator"}))),h.disabled=(K(s()),E(()=>{var p;return!((p=s())!=null&&p.default_save_paths.length)}))}),se("click",h,f),u(l,y),ve()}const Ut=l=>l;function $t(l){const e=l-1;return e*e*e+1}function qt(l,{delay:e=0,duration:a=400,easing:i=Ut}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:a,easing:i,css:m=>"opacity: ".concat(m*s)}}function Wt(l,{delay:e=0,duration:a=400,easing:i=$t,start:s=0,opacity:m=0}={}){const f=getComputedStyle(l),y=+f.opacity,d=f.transform==="none"?"":f.transform,v=1-s,o=y*(1-m);return{delay:e,duration:a,easing:i,css:(k,S)=>"\n			transform: ".concat(d," scale(").concat(1-v*S,");\n			opacity: ").concat(y-o*S,"\n		")}}var Kt=j('<div class="content scanning svelte-xwntj9"><div class="spinner svelte-xwntj9"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" stroke-opacity="0.25"></circle><path d="M12 2C6.47715 2 2 6.47715 2 12" stroke="currentColor" stroke-width="3" stroke-linecap="round"></path></svg></div> <h3 class="svelte-xwntj9">Scanning Library</h3> <p class="svelte-xwntj9"> </p></div>'),Ht=j('<div class="content svelte-xwntj9"><h3 class="svelte-xwntj9">Welcome back!</h3> <p class="svelte-xwntj9">Would you like to scan all systems for new save files?</p> <div class="actions svelte-xwntj9"><button class="btn secondary svelte-xwntj9">Skip</button> <button class="btn primary svelte-xwntj9">Scan All Systems</button></div></div>'),Vt=j('<div class="backdrop svelte-xwntj9"><div class="popup svelte-xwntj9" role="dialog" aria-modal="true"><!></div></div>');function Jt(l,e){ne(e,!1);let a=V(e,"scanning",8,!1),i=V(e,"progress",8,"");const s=Ce();oe();var m=Vt(),f=r(m),y=r(f);{var d=o=>{var k=Kt(),S=w(r(k),4),b=r(S,!0);t(S),t(k),H(()=>z(b,i()||"Please wait...")),u(o,k)},v=o=>{var k=Ht(),S=w(r(k),4),b=r(S),x=w(b,2);t(S),t(k),se("click",b,()=>s("cancel")),se("click",x,()=>s("scan")),u(o,k)};G(y,o=>{a()?o(d):o(v,!1)})}t(f),t(m),De(3,f,()=>Wt,()=>({start:.95,duration:200})),De(3,m,()=>qt,()=>({duration:200})),u(l,m),ve()}const Ne=Ae([]),Te=Ae(new Map),Se=Ae(null);var Qt=j('<button slot="actions" class="icon-button primary" aria-label="Open settings"><svg viewBox="0 0 24 24" aria-hidden="true"><path d="M10.75 3.5h2.5l.58 2.25a5 5 0 0 1 1.4.82L17.5 6l1.75 2.76-1.72 1.26c.06.3.09.62.09.94 0 .32-.03.63-.09.93l1.72 1.27L17.5 16l-2.27-.57a5 5 0 0 1-1.4.82l-.58 2.25h-2.5l-.58-2.25a5 5 0 0 1-1.4-.82L6.5 16l-1.75-2.76 1.72-1.27A5 5 0 0 1 6.38 11c0-.32.03-.63.09-.93L4.75 8.76 6.5 6l2.27.57a5 5 0 0 1 1.4-.82Z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="12" cy="12" r="2.5" fill="currentColor"></circle></svg></button>'),Xt=j('<!> <div><!> <div class="content svelte-1ybayt"><div class="content-surface svelte-1ybayt"><main class="content-body svelte-1ybayt"><div class="header-wrapper svelte-1ybayt"><!></div> <div class="content-grid svelte-1ybayt"><!> <!></div></main></div></div></div>',1);function Yt(l,e){ne(e,!1);const a=()=>Ee(Ne,"$profilesStore",m),i=()=>Ee(Se,"$selectedEmulatorIdStore",m),s=()=>Ee(Te,"$gamesCacheStore",m),[m,f]=st(),y=W(),d=W(),v=W(),o=W(),k=900;let S=W(0),b=W(!1),x=W(!0),h=W(!1),L=W(!1),_=W(""),F=W(!1);Re(()=>he(null,null,function*(){if(a().length>0){N(x,!1),i()||Se.set(a()[0].emulator_id),i()&&O(i());return}try{const c=yield ot();Ne.set(c),c.length>0&&(i()||Se.set(c[0].emulator_id),s().size===0?N(h,!0):i()&&O(i()))}catch(c){console.error("Failed to load emulator profiles",c)}finally{N(x,!1)}}));function O(c,T=!1){return he(this,null,function*(){if(!(!T&&s().has(c))){N(F,!0);try{const C=(yield nt(c)).map((I,re)=>({id:I.path,emulatorId:c,name:I.name,icon:re%3===0?"spark":re%2===0?"disc":"console",lastModified:new Date(I.modified).toISOString()}));C.sort((I,re)=>new Date(re.lastModified).getTime()-new Date(I.lastModified).getTime()),Te.update(I=>{const re=new Map(I);return re.set(c,C),re})}catch(R){console.error("Failed to scan files for ".concat(c),R)}finally{N(F,!1)}}})}function D(){return he(this,null,function*(){N(L,!0);try{const c=a();for(let T=0;T<c.length;T++){const R=c[T];N(_,"Scanning ".concat(R.name," (").concat(T+1,"/").concat(c.length,")...")),yield O(R.emulator_id,!0)}}catch(c){console.error("Scan all failed",c)}finally{N(L,!1),N(h,!1)}})}function p(c){Se.set(c),O(c,!0),n(d)&&N(b,!1)}function g(){N(b,!n(b))}function P(){Ze("/settings",{keepFocus:!0,noScroll:!0})}ue(()=>(a(),i()),()=>{var c;N(y,(c=a().find(T=>T.emulator_id===i()))!=null?c:null)}),ue(()=>n(S),()=>{N(d,n(S)<k)}),ue(()=>(n(d),n(b)),()=>{!n(d)&&n(b)&&N(b,!1)}),ue(()=>(n(b),n(d)),()=>{N(v,n(b)||!n(d))}),ue(()=>(i(),s()),()=>{var c;N(o,i()?(c=s().get(i()))!=null?c:[]:[])}),Oe(),oe();var $=Xt(),A=ie($);{var B=c=>{Jt(c,{get scanning(){return n(L)},get progress(){return n(_)},$$events:{scan:D,cancel:()=>N(h,!1)}})};G(A,c=>{n(h)&&c(B)})}var M=w(A,2);let q;var J=r(M);xt(J,{get emulators(){return a()},get selectedId(){return i()},get isMobile(){return n(d)},get open(){return n(v)},get loading(){return n(x)},$$events:{select:c=>p(c.detail),close:()=>N(b,!1)}});var Y=w(J,2),Z=r(Y),Q=r(Z),ee=r(Q),te=r(ee);vt(te,{eyebrow:"CrossSave Cloud",title:"Dashboard",get showMenu(){return n(d)},onMenu:g,onBack:()=>{},sticky:!1,$$slots:{actions:(c,T)=>{var R=Qt();se("click",R,P),u(c,R)}}}),t(ee);var X=w(ee,2),U=r(X);{let c=at(()=>(n(y),E(()=>{var T,R;return(R=(T=n(y))==null?void 0:T.name)!=null?R:""})));At(U,{get games(){return n(o)},get emulatorName(){return n(c)}})}var ae=w(U,2);zt(ae,{get profile(){return n(y)},get loading(){return n(F)},$$events:{reload:()=>i()&&O(i(),!0)}}),t(X),t(Q),t(Z),t(Y),t(M),H(()=>{q=ge(M,1,"shell svelte-1ybayt",null,q,{locked:n(d)&&n(b)}),Me(M,"data-mobile",n(d))}),ht("innerWidth",c=>N(S,c)),u(l,$),ve(),f()}var ea=j('<div class="error-screen svelte-1n46o8q"><h1 class="svelte-1n46o8q">Something went wrong</h1> <p class="svelte-1n46o8q">Check the developer console for more details.</p></div>');function ta(l,e){ne(e,!1);let a=W(!1);function i(v){var o;console.error("Uncaught error",(o=v.error)!=null?o:v.message),N(a,!0)}function s(v){console.error("Unhandled promise rejection",v.reason),N(a,!0)}Re(()=>(console.log("DEBUG: App.svelte mounted"),window.addEventListener("error",i),window.addEventListener("unhandledrejection",s),()=>{window.removeEventListener("error",i),window.removeEventListener("unhandledrejection",s)})),oe();var m=fe(),f=ie(m);{var y=v=>{Yt(v,{})},d=v=>{var o=ea();u(v,o)};G(f,v=>{n(a)?v(d,!1):v(y)})}u(l,m),ve()}function da(l){ta(l,{})}export{da as component};
