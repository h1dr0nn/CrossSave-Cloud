var u=(e,d,t)=>new Promise((m,o)=>{var h=s=>{try{i(t.next(s))}catch(a){o(a)}},l=s=>{try{i(t.throw(s))}catch(a){o(a)}},i=s=>s.done?m(s.value):Promise.resolve(s.value).then(h,l);i((t=t.apply(e,d)).next())});import{w as f,t as p}from"./CaUR0xkT.js";const g="ui-theme",c=typeof window!="undefined";function y(){return c&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function w(){if(!c)return"light";try{const e=localStorage.getItem(g);if(e==="light"||e==="dark"||e==="system")return e}catch(e){console.warn("Unable to read theme preference",e)}return"system"}function b(){const e=w(),d=e==="system"?y():e,t=f(e),m=f(d);function o(r){return u(this,null,function*(){if(!c)return;yield p();const n=r==="system"?y():r;document.body.dataset.theme=n,document.documentElement.style.colorScheme=n,m.set(n)})}c&&o(e);const h=c?window.matchMedia("(prefers-color-scheme: dark)"):null,l=r=>{t.update(n=>(n!=="system"||o(r.matches?"dark":"light"),n))};h&&h.addEventListener("change",l),t.subscribe(r=>{if(c){try{localStorage.setItem(g,r)}catch(n){console.warn("Unable to store theme preference",n)}o(r)}});function i(r){t.set(r)}function s(){t.update(r=>r==="dark"?"light":"dark")}function a(){t.set("system")}return{subscribe:t.subscribe,setTheme:i,toggleTheme:s,useSystemTheme:a,preference:t,activeTheme:m}}const k=b();export{k as t};
